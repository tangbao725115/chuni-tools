(()=>{"use strict";var e;!function(e){e.en_US="en_US",e.zh_TW="zh_TW"}(e||(e={}));const n="chunithm-net-eng.com",t="https://"+n;!function(o,r){const a={[e.en_US]:{alreadyRun:"Please refresh the page before running CHUNI TOOLS again!",wrongBase:`Oops! Looks like you are on the wrong page.\nPlease open CHUNITHM-NET Intl. (${n}) and login, then try again.`},[e.zh_TW]:{alreadyRun:"你已經執行過CHUNITHM小工具了！若要重新執行一次，請先重新整理頁面再來",wrongBase:`哇，看來你走錯路了。請到CHUNITHM-NET Intl. (${n}) 登入之後再試一次。`}}[function(){const n=new URLSearchParams(location.search);return n.get("lang")?n.get("lang").startsWith("zh")?e.zh_TW:e.en_US:function(){switch(localStorage.getItem("language")){case e.en_US:return e.en_US;case e.zh_TW:return e.zh_TW}return null}()||(navigator.language.startsWith("zh")?e.zh_TW:e.en_US)}()];if(r.chuniTools)return void alert(a.alreadyRun);if(r.chuniTools=!0,r.location.hostname!==n)return alert(a.wrongBase),void(r.location.href=t);function s(e){const n=o.createElement("script");n.src=`${function(){const e=Array.from(document.querySelectorAll("script"));for(;e.length;){const n=e.pop();if(n?.src.includes("chuni-tools")){const e=new URL(n.src),t=e.pathname;return e.origin+t.substring(0,t.lastIndexOf("/scripts"))}}return"https://dogeon188.github.io/chuni-tools"}()}/scripts/${e}.js`,o.body.append(n)}const i=o.location.pathname;-1!=i.indexOf("/mobile/home/userOption/updateUserName")?s("idxmap-generate"):-1!=i.indexOf("/mobile/record/musicGenre")?s("export-csv"):-1!=i.indexOf("/mobile/friend/genreVs/battleStart")?s("fetch-friend"):s("fetch-all")}(document,window)})();